.include "macros.inc"

.section .bss, "wa"
.balign 0x8
.global gTRKBigEndian
gTRKBigEndian:
	.skip 0x8

.section .rodata, "a"
.balign 0x8
# @133
.global lbl_8037C268
lbl_8037C268:
	.string "MetroTRK for Revolution v0.1"

.section .text, "ax"
.global TRKNubWelcome
TRKNubWelcome:
/* 800C13F4 000BC2F4  94 21 FF F0 */	stwu r1, -0x10(r1)
/* 800C13F8 000BC2F8  7C 08 02 A6 */	mflr r0
/* 800C13FC 000BC2FC  3C 60 80 38 */	lis r3, lbl_8037C268@ha
/* 800C1400 000BC300  90 01 00 14 */	stw r0, 0x14(r1)
/* 800C1404 000BC304  38 63 C2 68 */	addi r3, r3, lbl_8037C268@l
/* 800C1408 000BC308  48 00 4A 15 */	bl TRK_board_display
/* 800C140C 000BC30C  80 01 00 14 */	lwz r0, 0x14(r1)
/* 800C1410 000BC310  7C 08 03 A6 */	mtlr r0
/* 800C1414 000BC314  38 21 00 10 */	addi r1, r1, 0x10
/* 800C1418 000BC318  4E 80 00 20 */	blr 

.global TRKTerminateNub
TRKTerminateNub:
/* 800C141C 000BC31C  94 21 FF F0 */	stwu r1, -0x10(r1)
/* 800C1420 000BC320  7C 08 02 A6 */	mflr r0
/* 800C1424 000BC324  90 01 00 14 */	stw r0, 0x14(r1)
/* 800C1428 000BC328  48 00 09 B9 */	bl TRKTerminateSerialHandler
/* 800C142C 000BC32C  80 01 00 14 */	lwz r0, 0x14(r1)
/* 800C1430 000BC330  38 60 00 00 */	li r3, 0
/* 800C1434 000BC334  7C 08 03 A6 */	mtlr r0
/* 800C1438 000BC338  38 21 00 10 */	addi r1, r1, 0x10
/* 800C143C 000BC33C  4E 80 00 20 */	blr 

.global TRKInitializeNub
TRKInitializeNub:
/* 800C1440 000BC340  94 21 FF E0 */	stwu r1, -0x20(r1)
/* 800C1444 000BC344  7C 08 02 A6 */	mflr r0
/* 800C1448 000BC348  38 A0 00 12 */	li r5, 0x12
/* 800C144C 000BC34C  38 80 00 34 */	li r4, 0x34
/* 800C1450 000BC350  90 01 00 24 */	stw r0, 0x24(r1)
/* 800C1454 000BC354  38 60 00 56 */	li r3, 0x56
/* 800C1458 000BC358  38 00 00 78 */	li r0, 0x78
/* 800C145C 000BC35C  38 C0 00 01 */	li r6, 1
/* 800C1460 000BC360  98 A1 00 08 */	stb r5, 8(r1)
/* 800C1464 000BC364  3C A0 80 41 */	lis r5, gTRKBigEndian@ha
/* 800C1468 000BC368  93 E1 00 1C */	stw r31, 0x1c(r1)
/* 800C146C 000BC36C  3B E0 00 00 */	li r31, 0
/* 800C1470 000BC370  93 C1 00 18 */	stw r30, 0x18(r1)
/* 800C1474 000BC374  98 81 00 09 */	stb r4, 9(r1)
/* 800C1478 000BC378  98 61 00 0A */	stb r3, 0xa(r1)
/* 800C147C 000BC37C  98 01 00 0B */	stb r0, 0xb(r1)
/* 800C1480 000BC380  80 61 00 08 */	lwz r3, 8(r1)
/* 800C1484 000BC384  94 C5 BC C0 */	stwu r6, gTRKBigEndian@l(r5)
/* 800C1488 000BC388  3C 03 ED CC */	addis r0, r3, 0xedcc
/* 800C148C 000BC38C  28 00 56 78 */	cmplwi r0, 0x5678
/* 800C1490 000BC390  40 82 00 0C */	bne lbl_800C149C
/* 800C1494 000BC394  90 C5 00 00 */	stw r6, 0(r5)
/* 800C1498 000BC398  48 00 00 1C */	b lbl_800C14B4
lbl_800C149C:
/* 800C149C 000BC39C  3C 03 87 AA */	addis r0, r3, 0x87aa
/* 800C14A0 000BC3A0  28 00 34 12 */	cmplwi r0, 0x3412
/* 800C14A4 000BC3A4  40 82 00 0C */	bne lbl_800C14B0
/* 800C14A8 000BC3A8  93 E5 00 00 */	stw r31, 0(r5)
/* 800C14AC 000BC3AC  48 00 00 08 */	b lbl_800C14B4
lbl_800C14B0:
/* 800C14B0 000BC3B0  7C DF 33 78 */	mr r31, r6
lbl_800C14B4:
/* 800C14B4 000BC3B4  2C 1F 00 00 */	cmpwi r31, 0
/* 800C14B8 000BC3B8  40 82 00 08 */	bne lbl_800C14C0
/* 800C14BC 000BC3BC  48 00 0A D1 */	bl usr_put_initialize
lbl_800C14C0:
/* 800C14C0 000BC3C0  2C 1F 00 00 */	cmpwi r31, 0
/* 800C14C4 000BC3C4  40 82 00 0C */	bne lbl_800C14D0
/* 800C14C8 000BC3C8  4B FF FE D5 */	bl TRKInitializeEventQueue
/* 800C14CC 000BC3CC  7C 7F 1B 78 */	mr r31, r3
lbl_800C14D0:
/* 800C14D0 000BC3D0  2C 1F 00 00 */	cmpwi r31, 0
/* 800C14D4 000BC3D4  40 82 00 0C */	bne lbl_800C14E0
/* 800C14D8 000BC3D8  48 00 08 95 */	bl TRKInitializeMessageBuffers
/* 800C14DC 000BC3DC  7C 7F 1B 78 */	mr r31, r3
lbl_800C14E0:
/* 800C14E0 000BC3E0  2C 1F 00 00 */	cmpwi r31, 0
/* 800C14E4 000BC3E4  40 82 00 0C */	bne lbl_800C14F0
/* 800C14E8 000BC3E8  48 00 0C 71 */	bl TRKInitializeDispatcher
/* 800C14EC 000BC3EC  7C 7F 1B 78 */	mr r31, r3
lbl_800C14F0:
/* 800C14F0 000BC3F0  48 00 48 D5 */	bl InitializeProgramEndTrap
/* 800C14F4 000BC3F4  2C 1F 00 00 */	cmpwi r31, 0
/* 800C14F8 000BC3F8  40 82 00 0C */	bne lbl_800C1504
/* 800C14FC 000BC3FC  48 00 08 ED */	bl TRKInitializeSerialHandler
/* 800C1500 000BC400  7C 7F 1B 78 */	mr r31, r3
lbl_800C1504:
/* 800C1504 000BC404  2C 1F 00 00 */	cmpwi r31, 0
/* 800C1508 000BC408  40 82 00 0C */	bne lbl_800C1514
/* 800C150C 000BC40C  48 00 45 F9 */	bl TRKInitializeTarget
/* 800C1510 000BC410  7C 7F 1B 78 */	mr r31, r3
lbl_800C1514:
/* 800C1514 000BC414  2C 1F 00 00 */	cmpwi r31, 0
/* 800C1518 000BC418  40 82 00 44 */	bne lbl_800C155C
/* 800C151C 000BC41C  3C 60 80 4C */	lis r3, gTRKInputPendingPtr@ha
/* 800C1520 000BC420  3C A0 00 01 */	lis r5, 0x0000E100@ha
/* 800C1524 000BC424  38 C3 ED 80 */	addi r6, r3, gTRKInputPendingPtr@l
/* 800C1528 000BC428  38 80 00 01 */	li r4, 1
/* 800C152C 000BC42C  38 65 E1 00 */	addi r3, r5, 0x0000E100@l
/* 800C1530 000BC430  38 A0 00 00 */	li r5, 0
/* 800C1534 000BC434  48 00 4A 69 */	bl TRKInitializeIntDrivenUART
/* 800C1538 000BC438  3C 80 80 4C */	lis r4, gTRKInputPendingPtr@ha
/* 800C153C 000BC43C  7C 60 1B 78 */	mr r0, r3
/* 800C1540 000BC440  38 64 ED 80 */	addi r3, r4, gTRKInputPendingPtr@l
/* 800C1544 000BC444  80 63 00 00 */	lwz r3, 0(r3)
/* 800C1548 000BC448  7C 1E 03 78 */	mr r30, r0
/* 800C154C 000BC44C  48 00 29 3D */	bl TRKTargetSetInputPendingPtr
/* 800C1550 000BC450  2C 1E 00 00 */	cmpwi r30, 0
/* 800C1554 000BC454  41 82 00 08 */	beq lbl_800C155C
/* 800C1558 000BC458  7F DF F3 78 */	mr r31, r30
lbl_800C155C:
/* 800C155C 000BC45C  80 01 00 24 */	lwz r0, 0x24(r1)
/* 800C1560 000BC460  7F E3 FB 78 */	mr r3, r31
/* 800C1564 000BC464  83 E1 00 1C */	lwz r31, 0x1c(r1)
/* 800C1568 000BC468  83 C1 00 18 */	lwz r30, 0x18(r1)
/* 800C156C 000BC46C  7C 08 03 A6 */	mtlr r0
/* 800C1570 000BC470  38 21 00 20 */	addi r1, r1, 0x20
/* 800C1574 000BC474  4E 80 00 20 */	blr 
